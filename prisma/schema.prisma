generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["shopping"]
}

// Boutique - accessible via code PIN 6 chiffres
model Boutique {
  id        Int       @id @default(autoincrement())
  name      String
  code      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  magasins  Magasin[]

  @@schema("shopping")
}

// Magasin - appartient Ã  une boutique
model Magasin {
  id         Int       @id @default(autoincrement())
  name       String
  emoji      String    @default("ðŸ›’")
  position   Int       @default(0)
  boutiqueId Int
  boutique   Boutique  @relation(fields: [boutiqueId], references: [id], onDelete: Cascade)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  items      Item[]

  @@schema("shopping")
}

// Item - appartient Ã  un magasin avec quantitÃ© idÃ©ale et actuelle
model Item {
  id              Int      @id @default(autoincrement())
  name            String
  idealQuantity   Int      @default(1)
  currentQuantity Int      @default(0)
  magasinId       Int
  magasin         Magasin  @relation(fields: [magasinId], references: [id], onDelete: Cascade)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@schema("shopping")
}
